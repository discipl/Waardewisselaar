Type: MaxVergoedCollegegeld
Version: 1.0
Description: Duo past maximum te vergoeden collegegeld aan.
Template: {"jaar":{"type":"uint","desc":"Het jaar waarvoor dit maximum bedrag geldt.","name":"Jaar"},"bedrag":{"type":"float","desc":"Het bedrag.","name":"Bedrag"}}
Init: YXdhaXQgcXVlcnkoIkNSRUFURSIsICJtYXhfdmVyZ29lZF9jb2xsZWdlZ2VsZCIsICIoamFhciBJTlQgUFJJTUFSWSBLRVksIGJlZHJhZ19jZW50ZW4gSU5UIE5PVCBOVUxMKTsiLCBbXSk7
Code: aWYgKHBheWxvYWQuamFhciA+IDIxNDc0ODM2NDcpIHsKICAgIHJldHVybiAiT25nZWxkaWcgamFhci4iOwp9CmNvbnN0IGJlZHJhZ0NlbnRlbiA9IE1hdGgucm91bmQocGF5bG9hZC5iZWRyYWcgKiAxMDApOwppZiAoYmVkcmFnQ2VudGVuIDwgMCB8fCBiZWRyYWdDZW50ZW4gPiAyMTQ3NDgzNjQ3KSB7CiAgICByZXR1cm4gIk9uZ2VsZGlnZSBiZWRyYWciOwp9CmF3YWl0IHF1ZXJ5KCJJTlNFUlQiLCAibWF4X3ZlcmdvZWRfY29sbGVnZWdlbGQiLCAiKGphYXIsIGJlZHJhZ19jZW50ZW4pIFZBTFVFUyAoJDEsICQyKSBPTiBDT05GTElDVCBPTiBDT05TVFJBSU5UICIgKwogICAgIm1heF92ZXJnb2VkX2NvbGxlZ2VnZWxkX3BrZXkgRE8gVVBEQVRFIFNFVCBiZWRyYWdfY2VudGVuID0gJDI7IiwgW3BheWxvYWQuamFhciwgYmVkcmFnQ2VudGVuXSk7CnJldHVybiAiT0siOw==

Init as text:
await query("CREATE", "max_vergoed_collegegeld", "(jaar INT PRIMARY KEY, bedrag_centen INT NOT NULL);", []);
Code as text:
if (payload.jaar > 2147483647) {
    return "Ongeldig jaar.";
}
const bedragCenten = Math.round(payload.bedrag * 100);
if (bedragCenten < 0 || bedragCenten > 2147483647) {
    return "Ongeldige bedrag";
}
await query("INSERT", "max_vergoed_collegegeld", "(jaar, bedrag_centen) VALUES ($1, $2) ON CONFLICT ON CONSTRAINT " +
    "max_vergoed_collegegeld_pkey DO UPDATE SET bedrag_centen = $2;", [payload.jaar, bedragCenten]);
return "OK";